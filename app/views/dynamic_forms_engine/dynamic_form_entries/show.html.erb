
<div class="row">
	<h1 class="col-xs-12 col-sm-12 col-md-6 col-lg-6" id="main-header"><%= @dynamic_form_entry.dynamic_form_type.name %> </h1>
	<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
		<% if params[:iframe] != "1" %>
			<%= link_to("New #{@dynamic_form_entry.dynamic_form_type.name}", 
						new_form_entry_path(@dynamic_form_entry.dynamic_form_type), 
						:class=>"btn btn-success pull-right") %>

			<%= link_to("Entries", 
						form_entries_path(@dynamic_form_entry.dynamic_form_type), 
						:class=>"btn btn-info pull-right") %>
		<% end %>
	</div>

</div>
<div class="well col-md-12 col-lg-12">
	<% @dynamic_form_entry.each_field_with_value do |index, field| %>
		<div class="row row-table">
			
			<% if field[:type] == "file_upload" %>
				<label class="col-sm-2 control-label">
					<%= index.content_name %>:
				</label>
				<div class="col-sm-10">
					<%= link_to("Download", index.filename.url, class: 'btn btn-success') %>
				</div>
			<% elsif field[:type] == "phone_validation" %>
				<label class="col-sm-2 control-label">
					<%= field.content_name %>:
				</label>
				<div class="col-sm-10">
					<%= number_to_phone(field[:value]) %>
				</div>
			<% elsif field[:type] == "currency" %>
				<label class="col-sm-2 control-label">
					<%= field[:name] %>:
				</label>
				<div class="col-sm-10">
					<%= number_to_currency(field[:value]) %>
				</div>
			<% elsif field[:type] == "phone_validation" %>
				<label class="col-sm-2 control-label">
					<%= field[:name] %>:
				</label>
				<div class="col-sm-10">
					<%= number_to_phone(field[:value]) %>
				</div>
			<% elsif field[:type] == "agreement" %>
				<label class="col-sm-2 control-label">
					<%= field[:name] %>:
				</label>
				<div class="col-sm-10">
					<p>Approved</p>
				</div>
			<% elsif field[:type] == "check_box" %>
				<label class="col-sm-2 control-label">
					<%= field[:name] %>:
				</label>
				<div class="col-sm-10">
					<p>Checked</p>
				</div>
			<% else %>
				<label class="col-sm-2 control-label">
					<%= field[:name] %>:
				</label>
				<div class="col-sm-10">
					<%= field[:value] %>
				</div>
			<% end %>
		</div>
	<% end %>

	<% unless @contacts.blank? %>
		<% @contacts.each do |contact| %>
			<div class="row row-table">
				<label class="col-sm-1 control-label">Contact Type: </label>
				<div class="col-lg-1">
					<%= contact.contact_type %>
				</div>
				<label class="col-md-1 control-label">First Name: </label>
				<div class="col-sm-1">
					<%= contact.first_name %>
				</div>
				<label class="col-sm-1 control-label">Company: </label>
				<div class="col-sm-1">
					<%= !contact.company.empty? ? contact.company : 'None' %>
				</div>
				<label class="col-sm-1 control-label">Email: </label>
				<div class="col-sm-2">
					<%= contact.email %>
				</div>
				<label class="col-sm-1 control-label">Phone: </label>
				<div class="col-sm-1">
					<%= !contact.phone.empty? ? contact.phone : 'None' %>
				</div>
			</div>
		<% end %>
	<% end %>
	<% if @dynamic_form_entry.signature %>
		<div class="col-lg-10">
			<img id="signature_img" class="img-responsive" />
			<div class="col-md-8 col-sm-offset-1">
				<strong><em>The inspection above was inspected by <%= @current_user.email + " at " + @dynamic_form_entry.created_at.strftime('%A, %B %d %Y at %I:%M%p') %></em></strong>
			</div>
			<%= sign_form_field_tag(:signature, @dynamic_form_entry.signature || "") %>
			<script type="text/javascript">
	        	jQuery(function(){
		            var $ = jQuery,
		                $employee_sig_img = $('#signature_img'),
		                $employee_sig = jQuery('#signature_sig');
		                $employee_sig_img.attr('src', $employee_sig.jSignature('getData') );
		                $employee_sig.remove();
	            });
	    	</script>
	    </div>
	<% end %>
</div>
